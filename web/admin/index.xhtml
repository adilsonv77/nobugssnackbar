<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	>
<h:head>
	<link rel="stylesheet" type="text/css" href="../css/admin/style.css" />
	
	<style type="text/css">
            #luNorth .ui-layout-unit-content, #luSouth .ui-layout-unit-content {                    
                overflow:hidden !important;
            }
			.ui-dialog
			{
			     position: absolute !important;
			}
			.ui-widget-overlay {
				opacity: 0.60
			}
	</style>	

</h:head>
<h:body>

	<p:growl id="growlMsgs" showDetail="true"/>

	<p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />	
	<p:dialog widgetVar="statusDialog" draggable="false" closable="false" resizable="false" showHeader="false">
	    <p:graphicImage value="../images/ajaxLoadingBar.gif" />
	</p:dialog>
	
	<p:layout id="fullPage" fullPage="true">
		 
		<p:layoutUnit id="missionPnl" position="west" size="300" minSize="200" maxSize="400" resizable="true">
	        <f:facet name="header">
	        	<div class="clear">
        			<h:outputText value="#{msg['missions']}" />
        			<div id="missionBtns">
        				<p:commandButton id="addMissionBtn" icon="ui-icon-circle-plus" actionListener="#{mm.addMission()}" oncomplete="window.location.reload()" />
        				<p:commandButton id="deleteMissionBtn" icon="ui-icon-trash" actionListener="#{mm.checkIfSelected}" update=":missionDT,:growlMsgs" disabled="#{mm.isMissionSelected() == false}" />
        			</div>
        		</div>
    		</f:facet>
    		
   			<p:dataTable id="missionDT" styleClass="hide-column-names" selection="#{missionVC.mission}" selectionMode="single"
				var="m" rowKey="#{m.id}" emptyMessage="#{msg['nomissions']}"
				value="#{missionVC.missionList}">
    			<p:ajax event="rowSelect" listener="#{missionVC.handleMissionSelect}" update=":missionDT,:missionNameLangForm:missionNameCont,growlMsgs,deleteMissionBtn" />
    				
    			<p:column>
    				<h:outputText value="#{m.name}"/>
    			</p:column>
    		</p:dataTable>
	    </p:layoutUnit>
 
    	<p:layoutUnit position="center">
    	
        	<p:layout>
        		<p:layoutUnit id="luNorth" position="north">
        		    <h:form id="missionNameLangForm">
	        			<p:panelGrid columns="4">
	        				<p:outputLabel value="#{msg['name']} :" for="missionNameCont" />
	        				<p:inputText id="missionNameCont" value="#{mm.mission.name}">
	        					<p:ajax process="@this"/>
	        				</p:inputText>
	        				
	        				<p:outputLabel value="#{msg['language']} :" for="langMenu" />
	        				<p:selectOneMenu id="langMenu" style="width: 100px;">
	            				<f:selectItem itemLabel="en" itemValue="en" />
	            				<f:selectItem itemLabel="pt" itemValue="pt" />
	        				</p:selectOneMenu>	        				
	        			</p:panelGrid>
        			</h:form>
        		</p:layoutUnit>
        		
        		<p:layoutUnit id="luSouth" position="south" >
        			<p:panelGrid id="footerBtnPnl" columns="2">
        				<p:commandButton value="#{msg['test']}" icon="ui-icon-play"/>
        				<p:commandButton value="#{msg['save']}" icon="ui-icon-circle-arrow-s" actionListener="#{mm.save}"
        					 update="growlMsgs,  missionDT"/>
        			</p:panelGrid>
       			</p:layoutUnit>
       			
         		<p:layoutUnit id="mainTabs" position="center">
					<p:tabView id="tbView" dynamic="true" effect="fade" effectDuration="fast" cache="false">
				        
				        <p:tab id="explTab" title="#{msg['explanation']}">
				        	<ui:include src="modules/explanation.xhtml"/>
				        </p:tab>
				        
				        <p:tab title="#{msg['commands']}">
							<ui:include src="modules/commands.xhtml"/>
				        </p:tab>
				        
				        <p:tab title="#{msg['customers']}">
							<ui:include src="modules/customers.xhtml"/>
				        </p:tab>
				        
				        <p:tab title="#{msg['objectives']}">
							<ui:include src="modules/objectives.xhtml"/>
				        </p:tab>	
				        
				        <p:tab id="hintsTab" title="#{msg['hints']}">
							<ui:include src="modules/hints.xhtml"/>
				        </p:tab>	
				        
				        <p:tab title="#{msg['settings']}">
							<ui:include src="modules/settings.xhtml"/>
				        </p:tab>
				        
				        <p:tab title="#{msg['machines']}">
							In process of developing!
				        </p:tab>
				        			        			        			        	        		        		        
			    	</p:tabView>
        		</p:layoutUnit>
        		
       	</p:layout>
        	
    	</p:layoutUnit>
 
	</p:layout>
	
	<ui:include src="modules/dlgcustomer.xhtml"/>
	<ui:include src="modules/dlgexplanation.xhtml"/>
	<ui:include src="modules/dlghint.xhtml"/>  
	<ui:include src="modules/dlgrusure.xhtml"/> 
	<ui:include src="modules/dlgloadblocks.xhtml"/>
	
</h:body>
</html>