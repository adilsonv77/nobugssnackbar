<ui:composition  xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions">
	
	<p:panelGrid columns="2" style="margin-bottom: 50px;">
		<span class="my-lightbulb"></span>
		<h:outputText>
			<f:attribute name="value" value="#{msg['settingsMsg']}"/>
		</h:outputText>
	</p:panelGrid>
	
	<h:form id="settingsForm" style="width:700px;">
		<p:fieldset toggleable="false">
			<f:facet name="legend">
				<p:selectBooleanCheckbox value="#{msVC.repeatable}">
					<p:ajax event="change" update=":tbView:settingsForm" />
				</p:selectBooleanCheckbox>
				#{msg['repeatableMission']}
			</f:facet>
			
			<p:panelGrid columns="2">
				<h:outputText value="#{msg['timeLimit']}:"/>
				<p:inputText value="#{msVC.timeLimit}" disabled="#{!msVC.repeatable}">
					<p:ajax process="@this"/>
					<pe:keyFilter regEx="/[0-9]/"/>
				</p:inputText>
			</p:panelGrid>
		</p:fieldset>
		
		<p:panelGrid columns="2">
			<h:outputText value="#{msg['timesBeforeShowSlider']}:" />
			<p:inputText value="#{msVC.slider.timesBefore}" disabled="#{!msVC.repeatable}">
				<p:ajax process="@this"/>
				<pe:keyFilter regEx="/[0-9]/"/>
			</p:inputText>
			
			<h:outputText value="#{msg['cookStartsFrom']}:"/>
			<p:selectOneMenu value="#{msVC.cook.startPosition}">
				<p:ajax event="change"/>
				<f:selectItems value="#{msVC.cookStartsFromList}"
					itemLabel="#{selectedCookPosition}"/>
			</p:selectOneMenu>
				
			
			<h:outputText value="#{msg['xmlBlocks']}:"/>
			<p:outputPanel>
				 <p:panelGrid columns="1" >
				 	<p:column >
		       			 <p:selectBooleanCheckbox value="#{msVC.alwaysNew}">
		       			 	<p:ajax event="change" update="@this" />
		       			 </p:selectBooleanCheckbox>	       			 
		       			 <h:outputText value=" #{msg['alwaysNew']}" />
	       			 </p:column>
	       			 
	       			 <p:column>					 
		       			<p:selectBooleanCheckbox value="#{msVC.preload}">
		       				<p:ajax event="change" update="@this,loadMission" />
		       			</p:selectBooleanCheckbox>
		       			<h:outputText value=" #{msg['loadPrevMission']} "/>
						<p:selectOneMenu id="loadMission" value="#{msVC.mission}" converter="#{msVC.mc}" disabled="#{!msVC.preload}">
		        			<p:ajax event="change" listener="#{msVC.handlePrevMissionChange}"/>
		        			<f:selectItems value="#{msVC.missionList}" var="m" itemLabel="#{m.name}" itemValue="#{m}"/>
		        		</p:selectOneMenu>		       			 
	       			 </p:column>
	       			 
	       			 <p:column>					 
		       			 <p:selectBooleanCheckbox value="#{msVC.loadBlocks}">
		       			 	<p:ajax event="change" update="@this, loadBlocks" />
		       			 </p:selectBooleanCheckbox>
		       			 <h:outputText value=" #{msg['loadBlocks']} "/>
		       			 <p:commandButton id="loadBlocks" value="#{msg['open']}" oncomplete="PF('loadBlocksDlg').show()"
		        			disabled="#{!msVC.loadBlocks}"/>
	        		</p:column>
        		</p:panelGrid>
			</p:outputPanel>
		</p:panelGrid>
	</h:form>
	
</ui:composition>